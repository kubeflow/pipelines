apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kubeflow
resources:
- ../../pipeline
- ../../cache
- ../../cache-deployer
- pipeline-install-config.yaml
- mysql-secret.yaml
replacements:
  - source:
      kind: ConfigMap
      name: pipeline-install-config
      version: v1
      fieldPath: data.appName
    targets:
      - select:
          kind: Application
        fieldPaths:
          - metadata/name

  - source:
      kind: ConfigMap
      name: pipeline-install-config
      version: v1
      fieldPath: data.appVersion
    targets:
      - select:
          kind: Application
        fieldPaths:
          - spec/descriptor/version

  - source:
      kind: ConfigMap
      name: pipeline-install-config
      version: v1
      fieldPath: data.defaultPipelineRoot
    targets:
      - select:
          kind: ConfigMap
          name: kfp-launcher
          version: v1
        fieldPaths:
          - data.defaultPipelineRoot
