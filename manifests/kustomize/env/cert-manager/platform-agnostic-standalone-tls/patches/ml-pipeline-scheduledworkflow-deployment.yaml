apiVersion: apps/v1
kind: Deployment
metadata:
  name: ml-pipeline
spec:
  template:
    spec:
      containers:
        - name: ml-pipeline-scheduledworkflow
          command:
            - "/bin/controller"
          args:
            - "-logtostderr=true"
            - "-logLevel=info"
            - "-mlPipelineServiceTLSEnabled=true"
            - "-mlPipelineServiceTLSCert=/etc/pki/tls/certs/tls.crt"
            - "-namespace=kubeflow"
          volumeMounts:
          - name: tls-certs
            mountPath: /etc/pki/tls/certs
            readOnly: true
      volumes:
        - name: tls-certs
          secret:
            secretName: kfp-api-tls-cert
