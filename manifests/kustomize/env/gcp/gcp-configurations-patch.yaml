apiVersion: apps/v1beta2
kind: Deployment
metadata:
  name: ml-pipeline
spec:
  template:
    spec:
      containers:
        - name: ml-pipeline-api-server
          env:
            - name: OBJECTSTORECONFIG_BUCKETNAME
              # Don't add gs:// prefix.
              # If bucket doesn't exist, the deployment will create one.
              value: 'foobarmlpipeline'
            - name: DBCONFIG_PASSWORD
              value: '123'
---
apiVersion: apps/v1beta2
kind: Deployment
metadata:
  name: cloudsqlproxy
spec:
  template:
    spec:
      containers:
        - name: cloudsqlproxy
          env:
            - name: GCP_PROJECT
              value: 'yang-experiment-6'
            - name: CLOUDSQL_ZONE
              # E.g. us-central1
              value: 'us-central1'
            - name: CLOUDSQL_INSTANCE_NAME
              value: 'kfp-test'