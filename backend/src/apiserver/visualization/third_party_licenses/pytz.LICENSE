<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pytz - World Timezone Definitions for Python &mdash; pytz 2014.10 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2014.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pytz 2014.10 documentation" href="#" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pytz-world-timezone-definitions-for-python">
<h1>pytz - World Timezone Definitions for Python<a class="headerlink" href="#pytz-world-timezone-definitions-for-python" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Stuart Bishop &lt;<a class="reference external" href="mailto:stuart&#37;&#52;&#48;stuartbishop&#46;net">stuart<span>&#64;</span>stuartbishop<span>&#46;</span>net</a>&gt;</td>
</tr>
</tbody>
</table>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>pytz brings the Olson tz database into Python. This library allows
accurate and cross platform timezone calculations using Python 2.4
or higher. It also solves the issue of ambiguous times at the end
of daylight saving time, which you can read more about in the Python
Library Reference (<code class="docutils literal"><span class="pre">datetime.tzinfo</span></code>).</p>
<p>Almost all of the Olson timezones are supported.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This library differs from the documented Python API for
tzinfo implementations; if you want to create local wallclock
times you need to use the <code class="docutils literal"><span class="pre">localize()</span></code> method documented in this
document. In addition, if you perform date arithmetic on local
times that cross DST boundaries, the result may be in an incorrect
timezone (ie. subtract 1 minute from 2002-10-27 1:00 EST and you get
2002-10-27 0:59 EST instead of the correct 2002-10-27 1:59 EDT). A
<code class="docutils literal"><span class="pre">normalize()</span></code> method is provided to correct this. Unfortunately these
issues cannot be resolved without modifying the Python datetime
implementation (see PEP-431).</p>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This package can either be installed from a .egg file using setuptools,
or from the tarball using the standard Python distutils.</p>
<p>If you are installing from a tarball, run the following command as an
administrative user:</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py install
</pre></div>
</div>
<p>If you are installing using setuptools, you don&#8217;t even need to download
anything as the latest version will be downloaded for you
from the Python package index:</p>
<div class="highlight-python"><div class="highlight"><pre>easy_install --upgrade pytz
</pre></div>
</div>
<p>If you already have the .egg file, you can use that too:</p>
<div class="highlight-python"><div class="highlight"><pre>easy_install pytz-2008g-py2.6.egg
</pre></div>
</div>
</div>
<div class="section" id="example-usage">
<h2>Example &amp; Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="localized-times-and-date-arithmetic">
<h3>Localized times and date arithmetic<a class="headerlink" href="#localized-times-and-date-arithmetic" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">utc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc</span><span class="o">.</span><span class="n">zone</span>
<span class="go">&#39;UTC&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eastern</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eastern</span><span class="o">.</span><span class="n">zone</span>
<span class="go">&#39;US/Eastern&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amsterdam</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Europe/Amsterdam&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fmt</span> <span class="o">=</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %Z%z&#39;</span>
</pre></div>
</div>
<p>This library only supports two ways of building a localized time. The
first is to use the <code class="docutils literal"><span class="pre">localize()</span></code> method provided by the pytz library.
This is used to localize a naive datetime (datetime with no timezone
information):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">loc_dt</span> <span class="o">=</span> <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">loc_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
<span class="go">2002-10-27 06:00:00 EST-0500</span>
</pre></div>
</div>
<p>The second way of building a localized time is by converting an existing
localized time using the standard <code class="docutils literal"><span class="pre">astimezone()</span></code> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ams_dt</span> <span class="o">=</span> <span class="n">loc_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">amsterdam</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ams_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 12:00:00 CET+0100&#39;</span>
</pre></div>
</div>
<p>Unfortunately using the tzinfo argument of the standard datetime
constructors &#8216;&#8217;does not work&#8217;&#8217; with pytz for many timezones.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">amsterdam</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 12:00:00 LMT+0020&#39;</span>
</pre></div>
</div>
<p>It is safe for timezones without daylight saving transitions though, such
as UTC:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 12:00:00 UTC+0000&#39;</span>
</pre></div>
</div>
<p>The preferred way of dealing with times is to always work in UTC,
converting to localtime only when generating output to be read
by humans.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loc_dt</span> <span class="o">=</span> <span class="n">utc_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">eastern</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loc_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 01:00:00 EST-0500&#39;</span>
</pre></div>
</div>
<p>This library also allows you to do date arithmetic using local
times, although it is more complicated than working in UTC as you
need to use the <code class="docutils literal"><span class="pre">normalize()</span></code> method to handle daylight saving time
and other timezone transitions. In this example, <code class="docutils literal"><span class="pre">loc_dt</span></code> is set
to the instant when daylight saving time ends in the US/Eastern
timezone.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">before</span> <span class="o">=</span> <span class="n">loc_dt</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">before</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 00:50:00 EST-0500&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eastern</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">before</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 01:50:00 EDT-0400&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">after</span> <span class="o">=</span> <span class="n">eastern</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">before</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">20</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">after</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 01:10:00 EST-0500&#39;</span>
</pre></div>
</div>
<p>Creating local times is also tricky, and the reason why working with
local times is not recommended. Unfortunately, you cannot just pass
a <code class="docutils literal"><span class="pre">tzinfo</span></code> argument when constructing a datetime (see the next
section for more details)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt1</span> <span class="o">=</span> <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt1</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 01:30:00 EDT-0400&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt2</span> <span class="o">=</span> <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt2</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 01:30:00 EST-0500&#39;</span>
</pre></div>
</div>
<p>Converting between timezones is more easily done, using the
standard astimezone method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span> <span class="o">=</span> <span class="n">utc</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">1143408899</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2006-03-26 21:34:59 UTC+0000&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">au_tz</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Australia/Sydney&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">au_dt</span> <span class="o">=</span> <span class="n">utc_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">au_tz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">au_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2006-03-27 08:34:59 AEDT+1100&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt2</span> <span class="o">=</span> <span class="n">au_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt2</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2006-03-26 21:34:59 UTC+0000&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span> <span class="o">==</span> <span class="n">utc_dt2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>You can take shortcuts when dealing with the UTC side of timezone
conversions. <code class="docutils literal"><span class="pre">normalize()</span></code> and <code class="docutils literal"><span class="pre">localize()</span></code> are not really
necessary when there are no daylight saving time transitions to
deal with.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="mi">1143408899</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2006-03-26 21:34:59 UTC+0000&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">au_tz</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Australia/Sydney&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">au_dt</span> <span class="o">=</span> <span class="n">au_tz</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">utc_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">au_tz</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">au_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2006-03-27 08:34:59 AEDT+1100&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt2</span> <span class="o">=</span> <span class="n">au_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">utc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt2</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2006-03-26 21:34:59 UTC+0000&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="tzinfo-api">
<h3><code class="docutils literal"><span class="pre">tzinfo</span></code> API<a class="headerlink" href="#tzinfo-api" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">tzinfo</span></code> instances returned by the <code class="docutils literal"><span class="pre">timezone()</span></code> function have
been extended to cope with ambiguous times by adding an <code class="docutils literal"><span class="pre">is_dst</span></code>
parameter to the <code class="docutils literal"><span class="pre">utcoffset()</span></code>, <code class="docutils literal"><span class="pre">dst()</span></code> &amp;&amp; <code class="docutils literal"><span class="pre">tzname()</span></code> methods.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;America/St_Johns&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">normal</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ambiguous</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">is_dst</span></code> parameter is ignored for most timestamps. It is only used
during DST transition ambiguous periods to resulve that ambiguity.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">datetime.timedelta(-1, 77400)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">datetime.timedelta(0, 3600)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&#39;NDT&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">datetime.timedelta(-1, 77400)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">datetime.timedelta(0, 3600)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&#39;NDT&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">datetime.timedelta(-1, 77400)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">datetime.timedelta(0, 3600)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">&#39;NDT&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">datetime.timedelta(-1, 73800)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">datetime.timedelta(0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">&#39;NST&#39;</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">is_dst</span></code> is not specified, ambiguous timestamps will raise
an <code class="docutils literal"><span class="pre">pytz.exceptions.AmbiguousTimeError</span></code> exception.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
<span class="go">datetime.timedelta(-1, 77400)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
<span class="go">datetime.timedelta(0, 3600)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
<span class="go">&#39;NDT&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytz.exceptions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">tz</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">pytz</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">AmbiguousTimeError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;pytz.exceptions.AmbiguousTimeError: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ambiguous</span><span class="p">)</span>
<span class="go">pytz.exceptions.AmbiguousTimeError: 2009-10-31 23:30:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">tz</span><span class="o">.</span><span class="n">dst</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">pytz</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">AmbiguousTimeError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;pytz.exceptions.AmbiguousTimeError: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ambiguous</span><span class="p">)</span>
<span class="go">pytz.exceptions.AmbiguousTimeError: 2009-10-31 23:30:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">tz</span><span class="o">.</span><span class="n">tzname</span><span class="p">(</span><span class="n">ambiguous</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">pytz</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">AmbiguousTimeError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;pytz.exceptions.AmbiguousTimeError: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ambiguous</span><span class="p">)</span>
<span class="go">pytz.exceptions.AmbiguousTimeError: 2009-10-31 23:30:00</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="problems-with-localtime">
<h2>Problems with Localtime<a class="headerlink" href="#problems-with-localtime" title="Permalink to this headline">¶</a></h2>
<p>The major problem we have to deal with is that certain datetimes
may occur twice in a year. For example, in the US/Eastern timezone
on the last Sunday morning in October, the following sequence
happens:</p>
<blockquote>
<div><ul class="simple">
<li>01:00 EDT occurs</li>
<li>1 hour later, instead of 2:00am the clock is turned back 1 hour
and 01:00 happens again (this time 01:00 EST)</li>
</ul>
</div></blockquote>
<p>In fact, every instant between 01:00 and 02:00 occurs twice. This means
that if you try and create a time in the &#8216;US/Eastern&#8217; timezone
the standard datetime syntax, there is no way to specify if you meant
before of after the end-of-daylight-saving-time transition. Using the
pytz custom syntax, the best you can do is make an educated guess:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">loc_dt</span> <span class="o">=</span> <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mo">00</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loc_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 01:30:00 EST-0500&#39;</span>
</pre></div>
</div>
<p>As you can see, the system has chosen one for you and there is a 50%
chance of it being out by one hour. For some applications, this does
not matter. However, if you are trying to schedule meetings with people
in different timezones or analyze log files it is not acceptable.</p>
<p>The best and simplest solution is to stick with using UTC.  The pytz
package encourages using UTC for internal timezone representation by
including a special UTC implementation based on the standard Python
reference implementation in the Python documentation.</p>
<p>The UTC timezone unpickles to be the same instance, and pickles to a
smaller size than other pytz tzinfo instances.  The UTC implementation
can be obtained as pytz.utc, pytz.UTC, or pytz.timezone(&#8216;UTC&#8217;).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pickle</span><span class="o">,</span> <span class="nn">pytz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">utc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">naive</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">naive_p</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">naive</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">naive_p</span><span class="p">)</span>
<span class="go">17</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">==</span> <span class="n">dt</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="ow">is</span> <span class="n">dt</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="n">dt</span><span class="o">.</span><span class="n">tzinfo</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pytz</span><span class="o">.</span><span class="n">utc</span> <span class="ow">is</span> <span class="n">pytz</span><span class="o">.</span><span class="n">UTC</span> <span class="ow">is</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Note that some other timezones are commonly thought of as the same (GMT,
Greenwich, Universal, etc.). The definition of UTC is distinct from these
other timezones, and they are not equivalent. For this reason, they will
not compare the same in Python.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">utc</span> <span class="o">==</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;GMT&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>See the section <a class="reference internal" href="#what-is-utc">What is UTC</a>, below.</p>
<p>If you insist on working with local times, this library provides a
facility for constructing them unambiguously:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">loc_dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mo">00</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_dt</span> <span class="o">=</span> <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">loc_dt</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">edt_dt</span> <span class="o">=</span> <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">loc_dt</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">est_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; / &#39;</span> <span class="o">+</span> <span class="n">edt_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">))</span>
<span class="go">2002-10-27 01:30:00 EDT-0400 / 2002-10-27 01:30:00 EST-0500</span>
</pre></div>
</div>
<p>If you pass None as the is_dst flag to localize(), pytz will refuse to
guess and raise exceptions if you try to build ambiguous or non-existent
times.</p>
<p>For example, 1:30am on 27th Oct 2002 happened twice in the US/Eastern
timezone when the clocks where put back at the end of Daylight Saving
Time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mo">00</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">pytz</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">AmbiguousTimeError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;pytz.exceptions.AmbiguousTimeError: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">dt</span><span class="p">)</span>
<span class="go">pytz.exceptions.AmbiguousTimeError: 2002-10-27 01:30:00</span>
</pre></div>
</div>
<p>Similarly, 2:30am on 7th April 2002 never happened at all in the
US/Eastern timezone, as the clocks where put forward at 2:00am skipping
the entire hour:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mo">00</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">eastern</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">pytz</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">NonExistentTimeError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;pytz.exceptions.NonExistentTimeError: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">dt</span><span class="p">)</span>
<span class="go">pytz.exceptions.NonExistentTimeError: 2002-04-07 02:30:00</span>
</pre></div>
</div>
<p>Both of these exceptions share a common base class to make error handling
easier:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">AmbiguousTimeError</span><span class="p">(),</span> <span class="n">pytz</span><span class="o">.</span><span class="n">InvalidTimeError</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">NonExistentTimeError</span><span class="p">(),</span> <span class="n">pytz</span><span class="o">.</span><span class="n">InvalidTimeError</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A special case is where countries change their timezone definitions
with no daylight savings time switch. For example, in 1915 Warsaw
switched from Warsaw time to Central European time with no daylight savings
transition. So at the stroke of midnight on August 5th 1915 the clocks
were wound back 24 minutes creating an ambiguous time period that cannot
be specified without referring to the timezone abbreviation or the
actual UTC offset. In this case midnight happened twice, neither time
during a daylight saving time period. pytz handles this transition by
treating the ambiguous period before the switch as daylight savings
time, and the ambiguous period after as standard time.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">warsaw</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Europe/Warsaw&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amb_dt1</span> <span class="o">=</span> <span class="n">warsaw</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1915</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amb_dt1</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;1915-08-04 23:59:59 WMT+0124&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amb_dt2</span> <span class="o">=</span> <span class="n">warsaw</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1915</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">),</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amb_dt2</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;1915-08-04 23:59:59 CET+0100&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">switch_dt</span> <span class="o">=</span> <span class="n">warsaw</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1915</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mo">00</span><span class="p">,</span> <span class="mo">00</span><span class="p">,</span> <span class="mo">00</span><span class="p">),</span> <span class="n">is_dst</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">switch_dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;1915-08-05 00:00:00 CET+0100&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">switch_dt</span> <span class="o">-</span> <span class="n">amb_dt1</span><span class="p">)</span>
<span class="go">&#39;0:24:01&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">switch_dt</span> <span class="o">-</span> <span class="n">amb_dt2</span><span class="p">)</span>
<span class="go">&#39;0:00:01&#39;</span>
</pre></div>
</div>
<p>The best way of creating a time during an ambiguous time period is
by converting from another timezone such as UTC:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">1915</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc_dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">warsaw</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
<span class="go">&#39;1915-08-04 23:36:00 CET+0100&#39;</span>
</pre></div>
</div>
<p>The standard Python way of handling all these ambiguities is not to
handle them, such as demonstrated in this example using the US/Eastern
timezone definition from the Python documentation (Note that this
implementation only works for dates between 1987 and 2006 - it is
included for tests only!):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz.reference</span> <span class="kn">import</span> <span class="n">Eastern</span> <span class="c1"># pytz.reference only for tests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">Eastern</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="go">&#39;2002-10-27 00:30:00-04:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="go">&#39;2002-10-27 01:30:00-05:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">&#39;2002-10-27 02:30:00-05:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="go">&#39;2002-10-27 03:30:00-05:00&#39;</span>
</pre></div>
</div>
<p>Notice the first two results? At first glance you might think they are
correct, but taking the UTC offset into account you find that they are
actually two hours appart instead of the 1 hour we asked for.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz.reference</span> <span class="kn">import</span> <span class="n">UTC</span> <span class="c1"># pytz.reference only for tests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">UTC</span><span class="p">))</span>
<span class="go">&#39;2002-10-27 04:30:00+00:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">((</span><span class="n">dt</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">UTC</span><span class="p">))</span>
<span class="go">&#39;2002-10-27 06:30:00+00:00&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="country-information">
<h2>Country Information<a class="headerlink" href="#country-information" title="Permalink to this headline">¶</a></h2>
<p>A mechanism is provided to access the timezones commonly in use
for a particular country, looked up using the ISO 3166 country code.
It returns a list of strings that can be used to retrieve the relevant
tzinfo instance using <code class="docutils literal"><span class="pre">pytz.timezone()</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">country_timezones</span><span class="p">[</span><span class="s1">&#39;nz&#39;</span><span class="p">]))</span>
<span class="go">Pacific/Auckland Pacific/Chatham</span>
</pre></div>
</div>
<p>The Olson database comes with a ISO 3166 country code to English country
name mapping that pytz exposes as a dictionary:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">pytz</span><span class="o">.</span><span class="n">country_names</span><span class="p">[</span><span class="s1">&#39;nz&#39;</span><span class="p">])</span>
<span class="go">New Zealand</span>
</pre></div>
</div>
</div>
<div class="section" id="what-is-utc">
<h2>What is UTC<a class="headerlink" href="#what-is-utc" title="Permalink to this headline">¶</a></h2>
<p>&#8216;UTC&#8217; is <a class="reference external" href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time</a>. It is a successor to, but distinct
from, Greenwich Mean Time (GMT) and the various definitions of Universal
Time. UTC is now the worldwide standard for regulating clocks and time
measurement.</p>
<p>All other timezones are defined relative to UTC, and include offsets like
UTC+0800 - hours to add or subtract from UTC to derive the local time. No
daylight saving time occurs in UTC, making it a useful timezone to perform
date arithmetic without worrying about the confusion and ambiguities caused
by daylight saving time transitions, your country changing its timezone, or
mobile computers that roam through multiple timezones.</p>
</div>
<div class="section" id="helpers">
<h2>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h2>
<p>There are two lists of timezones provided.</p>
<p><code class="docutils literal"><span class="pre">all_timezones</span></code> is the exhaustive list of the timezone names that can
be used.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz</span> <span class="kn">import</span> <span class="n">all_timezones</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">all_timezones</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">500</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Etc/Greenwich&#39;</span> <span class="ow">in</span> <span class="n">all_timezones</span>
<span class="go">True</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">common_timezones</span></code> is a list of useful, current timezones. It doesn&#8217;t
contain deprecated zones or historical zones, except for a few I&#8217;ve
deemed in common usage, such as US/Eastern (open a bug report if you
think other timezones are deserving of being included here). It is also
a sequence of strings.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz</span> <span class="kn">import</span> <span class="n">common_timezones</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">common_timezones</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_timezones</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Etc/Greenwich&#39;</span> <span class="ow">in</span> <span class="n">common_timezones</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Australia/Melbourne&#39;</span> <span class="ow">in</span> <span class="n">common_timezones</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;US/Eastern&#39;</span> <span class="ow">in</span> <span class="n">common_timezones</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Canada/Eastern&#39;</span> <span class="ow">in</span> <span class="n">common_timezones</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;US/Pacific-New&#39;</span> <span class="ow">in</span> <span class="n">all_timezones</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;US/Pacific-New&#39;</span> <span class="ow">in</span> <span class="n">common_timezones</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Both <code class="docutils literal"><span class="pre">common_timezones</span></code> and <code class="docutils literal"><span class="pre">all_timezones</span></code> are alphabetically
sorted:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">common_timezones_dupe</span> <span class="o">=</span> <span class="n">common_timezones</span><span class="p">[:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common_timezones_dupe</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">common_timezones</span> <span class="o">==</span> <span class="n">common_timezones_dupe</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_timezones_dupe</span> <span class="o">=</span> <span class="n">all_timezones</span><span class="p">[:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_timezones_dupe</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">all_timezones</span> <span class="o">==</span> <span class="n">all_timezones_dupe</span>
<span class="go">True</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">all_timezones</span></code> and <code class="docutils literal"><span class="pre">common_timezones</span></code> are also available as sets.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz</span> <span class="kn">import</span> <span class="n">all_timezones_set</span><span class="p">,</span> <span class="n">common_timezones_set</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;US/Eastern&#39;</span> <span class="ow">in</span> <span class="n">all_timezones_set</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;US/Eastern&#39;</span> <span class="ow">in</span> <span class="n">common_timezones_set</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Australia/Victoria&#39;</span> <span class="ow">in</span> <span class="n">common_timezones_set</span>
<span class="go">False</span>
</pre></div>
</div>
<p>You can also retrieve lists of timezones used by particular countries
using the <code class="docutils literal"><span class="pre">country_timezones()</span></code> function. It requires an ISO-3166
two letter country code.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz</span> <span class="kn">import</span> <span class="n">country_timezones</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">country_timezones</span><span class="p">(</span><span class="s1">&#39;ch&#39;</span><span class="p">)))</span>
<span class="go">Europe/Zurich</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">country_timezones</span><span class="p">(</span><span class="s1">&#39;CH&#39;</span><span class="p">)))</span>
<span class="go">Europe/Zurich</span>
</pre></div>
</div>
</div>
<div class="section" id="internationalization-i18n-l10n">
<h2>Internationalization - i18n/l10n<a class="headerlink" href="#internationalization-i18n-l10n" title="Permalink to this headline">¶</a></h2>
<p>Pytz is an interface to the IANA database, which uses ASCII names. The <a class="reference external" href="http://cldr.unicode.org">Unicode  Consortium&#8217;s Unicode Locales (CLDR)</a>
project provides translations. Thomas Khyn&#8217;s
<a class="reference external" href="https://pypi.python.org/pypi/l18n">l18n</a> package can be used to access
these translations from Python.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>MIT license.</p>
<p>This code is also available as part of Zope 3 under the Zope Public
License,  Version 2.1 (ZPL).</p>
<p>I&#8217;m happy to relicense this code if necessary for inclusion in other
open source projects.</p>
</div>
<div class="section" id="latest-versions">
<h2>Latest Versions<a class="headerlink" href="#latest-versions" title="Permalink to this headline">¶</a></h2>
<p>This package will be updated after releases of the Olson timezone
database.  The latest version can be downloaded from the <a class="reference external" href="http://pypi.python.org/pypi/pytz/">Python Package
Index</a>.  The code that is used
to generate this distribution is hosted on launchpad.net and available
using the <a class="reference external" href="http://bazaar-vcs.org">Bazaar version control system</a>
using:</p>
<div class="highlight-python"><div class="highlight"><pre>bzr branch lp:pytz
</pre></div>
</div>
<p>Announcements of new releases are made on
<a class="reference external" href="https://launchpad.net/pytz">Launchpad</a>, and the
<a class="reference external" href="http://feeds.launchpad.net/pytz/announcements.atom">Atom feed</a>
hosted there.</p>
</div>
<div class="section" id="bugs-feature-requests-patches">
<h2>Bugs, Feature Requests &amp; Patches<a class="headerlink" href="#bugs-feature-requests-patches" title="Permalink to this headline">¶</a></h2>
<p>Bugs can be reported using <a class="reference external" href="https://bugs.launchpad.net/pytz">Launchpad</a>.</p>
</div>
<div class="section" id="issues-limitations">
<h2>Issues &amp; Limitations<a class="headerlink" href="#issues-limitations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Offsets from UTC are rounded to the nearest whole minute, so timezones
such as Europe/Amsterdam pre 1937 will be up to 30 seconds out. This
is a limitation of the Python datetime library.</li>
<li>If you think a timezone definition is incorrect, I probably can&#8217;t fix
it. pytz is a direct translation of the Olson timezone database, and
changes to the timezone definitions need to be made to this source.
If you find errors they should be reported to the time zone mailing
list, linked from <a class="reference external" href="http://www.iana.org/time-zones">http://www.iana.org/time-zones</a>.</li>
</ul>
</div>
<div class="section" id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Permalink to this headline">¶</a></h2>
<p>More info than you want to know about timezones:
<a class="reference external" href="http://www.twinsun.com/tz/tz-link.htm">http://www.twinsun.com/tz/tz-link.htm</a></p>
</div>
<div class="section" id="contact">
<h2>Contact<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h2>
<p>Stuart Bishop &lt;<a class="reference external" href="mailto:stuart&#37;&#52;&#48;stuartbishop&#46;net">stuart<span>&#64;</span>stuartbishop<span>&#46;</span>net</a>&gt;</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pytz - World Timezone Definitions for Python</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#example-usage">Example &amp; Usage</a><ul>
<li><a class="reference internal" href="#localized-times-and-date-arithmetic">Localized times and date arithmetic</a></li>
<li><a class="reference internal" href="#tzinfo-api"><code class="docutils literal"><span class="pre">tzinfo</span></code> API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#problems-with-localtime">Problems with Localtime</a></li>
<li><a class="reference internal" href="#country-information">Country Information</a></li>
<li><a class="reference internal" href="#what-is-utc">What is UTC</a></li>
<li><a class="reference internal" href="#helpers">Helpers</a></li>
<li><a class="reference internal" href="#internationalization-i18n-l10n">Internationalization - i18n/l10n</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#latest-versions">Latest Versions</a></li>
<li><a class="reference internal" href="#bugs-feature-requests-patches">Bugs, Feature Requests &amp; Patches</a></li>
<li><a class="reference internal" href="#issues-limitations">Issues &amp; Limitations</a></li>
<li><a class="reference internal" href="#further-reading">Further Reading</a></li>
<li><a class="reference internal" href="#contact">Contact</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2008, Stuart Bishop.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/index.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>