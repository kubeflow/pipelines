{
   "components":{
      "comp-image-dataset-create":{
         "executorLabel":"exec-image-dataset-create",
         "inputDefinitions":{
            "parameters":{
               "display_name":{
                  "parameterType":"STRING"
               },
               "gcs_source":{
                  "parameterType":"STRING"
               },
               "import_schema_uri":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      },
      "comp-image-dataset-export":{
         "executorLabel":"exec-image-dataset-export",
         "inputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            },
            "parameters":{
               "output_dir":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "exported_dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      },
      "comp-image-dataset-import":{
         "executorLabel":"exec-image-dataset-import",
         "inputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            },
            "parameters":{
               "gcs_source":{
                  "parameterType":"STRING"
               },
               "import_schema_uri":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      }
   },
   "deploymentSpec":{
      "executors":{
         "exec-image-dataset-create":{
            "container":{
               "args":[
                  "--method.project",
                  "{{$.inputs.parameters['project']}}",
                  "--method.location",
                  "--method.display_name",
                  "{{$.inputs.parameters['display_name']}}",
                  "--method.data_item_labels",
                  "--method.gcs_source",
                  "{{$.inputs.parameters['gcs_source']}}",
                  "--method.import_schema_uri",
                  "{{$.inputs.parameters['import_schema_uri']}}",
                  "--method.labels",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['dataset'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "ImageDataset",
                  "--method_name",
                  "create"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         },
         "exec-image-dataset-export":{
            "container":{
               "args":[
                  "--init.dataset_name",
                  "{{$.inputs.artifacts['dataset'].metadata['resourceName']}}",
                  "--init.project",
                  "{{$.inputs.parameters['project']}}",
                  "--init.location",
                  "--method.output_dir",
                  "{{$.inputs.parameters['output_dir']}}",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['exported_dataset'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "ImageDataset",
                  "--method_name",
                  "export_data"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         },
         "exec-image-dataset-import":{
            "container":{
               "args":[
                  "--init.project",
                  "{{$.inputs.parameters['project']}}",
                  "--init.location",
                  "--init.dataset_name",
                  "{{$.inputs.artifacts['dataset'].metadata['resourceName']}}",
                  "--method.data_item_labels",
                  "--method.gcs_source",
                  "{{$.inputs.parameters['gcs_source']}}",
                  "--method.import_schema_uri",
                  "{{$.inputs.parameters['import_schema_uri']}}",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['dataset'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "ImageDataset",
                  "--method_name",
                  "import_data"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         }
      }
   },
   "pipelineInfo":{
      "name":"training-test"
   },
   "root":{
      "dag":{
         "tasks":{
            "image-dataset-create":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-image-dataset-create"
               },
               "inputs":{
                  "parameters":{
                     "display_name":{
                        "runtimeValue":{
                           "constant":"test_display_name"
                        }
                     },
                     "gcs_source":{
                        "runtimeValue":{
                           "constant":"gs://test_gcs_source"
                        }
                     },
                     "import_schema_uri":{
                        "runtimeValue":{
                           "constant":"gs://google-cloud-aiplatform/schema/dataset/ioformat/image_classification_single_label_io_format_1.0.0.yaml"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"image-dataset-create"
               }
            },
            "image-dataset-export":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-image-dataset-export"
               },
               "dependentTasks":[
                  "image-dataset-create"
               ],
               "inputs":{
                  "artifacts":{
                     "dataset":{
                        "taskOutputArtifact":{
                           "outputArtifactKey":"dataset",
                           "producerTask":"image-dataset-create"
                        }
                     }
                  },
                  "parameters":{
                     "output_dir":{
                        "runtimeValue":{
                           "constant":"gs://test_gcs_output_dir"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"image-dataset-export"
               }
            },
            "image-dataset-import":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-image-dataset-import"
               },
               "dependentTasks":[
                  "image-dataset-create"
               ],
               "inputs":{
                  "artifacts":{
                     "dataset":{
                        "taskOutputArtifact":{
                           "outputArtifactKey":"dataset",
                           "producerTask":"image-dataset-create"
                        }
                     }
                  },
                  "parameters":{
                     "gcs_source":{
                        "runtimeValue":{
                           "constant":"gs://test_gcs_source"
                        }
                     },
                     "import_schema_uri":{
                        "runtimeValue":{
                           "constant":"gs://google-cloud-aiplatform/schema/dataset/ioformat/image_classification_single_label_io_format_1.0.0.yaml"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"image-dataset-import"
               }
            }
         }
      }
   },
   "schemaVersion":"2.1.0"
}
