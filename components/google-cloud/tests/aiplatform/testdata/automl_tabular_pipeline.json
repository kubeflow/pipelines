{
   "components":{
      "comp-automl-tabular-training-job":{
         "executorLabel":"exec-automl-tabular-training-job",
         "inputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            },
            "parameters":{
               "column_transformations":{
                  "parameterType":"LIST"
               },
               "display_name":{
                  "parameterType":"STRING"
               },
               "optimization_objective":{
                  "parameterType":"STRING"
               },
               "optimization_prediction_type":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               },
               "target_column":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "model":{
                  "artifactType":{
                     "schemaTitle":"google.VertexModel",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      },
      "comp-tabular-dataset-create":{
         "executorLabel":"exec-tabular-dataset-create",
         "inputDefinitions":{
            "parameters":{
               "display_name":{
                  "parameterType":"STRING"
               },
               "gcs_source":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      },
      "comp-tabular-dataset-export":{
         "executorLabel":"exec-tabular-dataset-export",
         "inputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            },
            "parameters":{
               "output_dir":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "exported_dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      }
   },
   "deploymentSpec":{
      "executors":{
         "exec-automl-tabular-training-job":{
            "container":{
               "args":[
                  "--init.project",
                  "{{$.inputs.parameters['project']}}",
                  "--init.location",
                  "--init.display_name",
                  "{{$.inputs.parameters['display_name']}}",
                  "--init.optimization_prediction_type",
                  "{{$.inputs.parameters['optimization_prediction_type']}}",
                  "--method.dataset",
                  "{{$.inputs.artifacts['dataset'].metadata['resourceName']}}",
                  "--method.target_column",
                  "{{$.inputs.parameters['target_column']}}",
                  "--init.optimization_objective",
                  "{{$.inputs.parameters['optimization_objective']}}",
                  "--init.column_transformations",
                  "{{$.inputs.parameters['column_transformations']}}",
                  "--init.labels",
                  "--method.disable_early_stopping",
                  "--method.export_evaluated_data_items",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['model'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "AutoMLTabularTrainingJob",
                  "--method_name",
                  "run"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         },
         "exec-tabular-dataset-create":{
            "container":{
               "args":[
                  "--method.project",
                  "{{$.inputs.parameters['project']}}",
                  "--method.location",
                  "--method.display_name",
                  "{{$.inputs.parameters['display_name']}}",
                  "--method.gcs_source",
                  "{{$.inputs.parameters['gcs_source']}}",
                  "--method.labels",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['dataset'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "TabularDataset",
                  "--method_name",
                  "create"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         },
         "exec-tabular-dataset-export":{
            "container":{
               "args":[
                  "--init.dataset_name",
                  "{{$.inputs.artifacts['dataset'].metadata['resourceName']}}",
                  "--init.project",
                  "{{$.inputs.parameters['project']}}",
                  "--init.location",
                  "--method.output_dir",
                  "{{$.inputs.parameters['output_dir']}}",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['exported_dataset'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "TabularDataset",
                  "--method_name",
                  "export_data"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         }
      }
   },
   "pipelineInfo":{
      "name":"training-test"
   },
   "root":{
      "dag":{
         "tasks":{
            "automl-tabular-training-job":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-automl-tabular-training-job"
               },
               "dependentTasks":[
                  "tabular-dataset-create"
               ],
               "inputs":{
                  "artifacts":{
                     "dataset":{
                        "taskOutputArtifact":{
                           "outputArtifactKey":"dataset",
                           "producerTask":"tabular-dataset-create"
                        }
                     }
                  },
                  "parameters":{
                     "column_transformations":{
                        "runtimeValue":{
                           "constant":[
                              {
                                 "numeric":{
                                    "column_name":"longitude"
                                 }
                              }
                           ]
                        }
                     },
                     "display_name":{
                        "runtimeValue":{
                           "constant":"test_display_name"
                        }
                     },
                     "optimization_objective":{
                        "runtimeValue":{
                           "constant":"minimize-rmse"
                        }
                     },
                     "optimization_prediction_type":{
                        "runtimeValue":{
                           "constant":"regression"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     },
                     "target_column":{
                        "runtimeValue":{
                           "constant":"longitude"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"automl-tabular-training-job"
               }
            },
            "tabular-dataset-create":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-tabular-dataset-create"
               },
               "inputs":{
                  "parameters":{
                     "display_name":{
                        "runtimeValue":{
                           "constant":"test_display_name"
                        }
                     },
                     "gcs_source":{
                        "runtimeValue":{
                           "constant":"gs://test_gcs_source"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"tabular-dataset-create"
               }
            },
            "tabular-dataset-export":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-tabular-dataset-export"
               },
               "dependentTasks":[
                  "tabular-dataset-create"
               ],
               "inputs":{
                  "artifacts":{
                     "dataset":{
                        "taskOutputArtifact":{
                           "outputArtifactKey":"dataset",
                           "producerTask":"tabular-dataset-create"
                        }
                     }
                  },
                  "parameters":{
                     "output_dir":{
                        "runtimeValue":{
                           "constant":"gs://test_gcs_output_dir"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"tabular-dataset-export"
               }
            }
         }
      }
   },
   "schemaVersion":"2.1.0"
}
