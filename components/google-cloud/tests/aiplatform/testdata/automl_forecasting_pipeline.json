{
   "components":{
      "comp-automl-forecasting-training-job":{
         "executorLabel":"exec-automl-forecasting-training-job",
         "inputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            },
            "parameters":{
               "available_at_forecast_columns":{
                  "parameterType":"LIST"
               },
               "data_granularity_count":{
                  "parameterType":"NUMBER_INTEGER"
               },
               "data_granularity_unit":{
                  "parameterType":"STRING"
               },
               "display_name":{
                  "parameterType":"STRING"
               },
               "forecast_horizon":{
                  "parameterType":"NUMBER_INTEGER"
               },
               "model_display_name":{
                  "parameterType":"STRING"
               },
               "optimization_objective":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               },
               "target_column":{
                  "parameterType":"STRING"
               },
               "test_fraction_split":{
                  "parameterType":"NUMBER_DOUBLE"
               },
               "time_column":{
                  "parameterType":"STRING"
               },
               "time_series_identifier_column":{
                  "parameterType":"STRING"
               },
               "training_fraction_split":{
                  "parameterType":"NUMBER_DOUBLE"
               },
               "unavailable_at_forecast_columns":{
                  "parameterType":"LIST"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "model":{
                  "artifactType":{
                     "schemaTitle":"google.VertexModel",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      },
      "comp-time-series-dataset-create":{
         "executorLabel":"exec-time-series-dataset-create",
         "inputDefinitions":{
            "parameters":{
               "display_name":{
                  "parameterType":"STRING"
               },
               "gcs_source":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      },
      "comp-time-series-dataset-export":{
         "executorLabel":"exec-time-series-dataset-export",
         "inputDefinitions":{
            "artifacts":{
               "dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            },
            "parameters":{
               "output_dir":{
                  "parameterType":"STRING"
               },
               "project":{
                  "parameterType":"STRING"
               }
            }
         },
         "outputDefinitions":{
            "artifacts":{
               "exported_dataset":{
                  "artifactType":{
                     "schemaTitle":"google.VertexDataset",
                     "schemaVersion":"0.0.1"
                  }
               }
            }
         }
      }
   },
   "deploymentSpec":{
      "executors":{
         "exec-automl-forecasting-training-job":{
            "container":{
               "args":[
                  "--init.project",
                  "{{$.inputs.parameters['project']}}",
                  "--init.location",
                  "--init.display_name",
                  "{{$.inputs.parameters['display_name']}}",
                  "--method.target_column",
                  "{{$.inputs.parameters['target_column']}}",
                  "--method.time_column",
                  "{{$.inputs.parameters['time_column']}}",
                  "--method.time_series_identifier_column",
                  "{{$.inputs.parameters['time_series_identifier_column']}}",
                  "--method.unavailable_at_forecast_columns",
                  "{{$.inputs.parameters['unavailable_at_forecast_columns']}}",
                  "--method.available_at_forecast_columns",
                  "{{$.inputs.parameters['available_at_forecast_columns']}}",
                  "--method.forecast_horizon",
                  "{{$.inputs.parameters['forecast_horizon']}}",
                  "--method.data_granularity_unit",
                  "{{$.inputs.parameters['data_granularity_unit']}}",
                  "--method.data_granularity_count",
                  "{{$.inputs.parameters['data_granularity_count']}}",
                  "--method.dataset",
                  "{{$.inputs.artifacts['dataset'].metadata['resourceName']}}",
                  "--init.optimization_objective",
                  "{{$.inputs.parameters['optimization_objective']}}",
                  "--method.training_fraction_split",
                  "{{$.inputs.parameters['training_fraction_split']}}",
                  "--method.model_display_name",
                  "{{$.inputs.parameters['model_display_name']}}",
                  "--method.test_fraction_split",
                  "{{$.inputs.parameters['test_fraction_split']}}",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['model'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "AutoMLForecastingTrainingJob",
                  "--method_name",
                  "run"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         },
         "exec-time-series-dataset-create":{
            "container":{
               "args":[
                  "--method.project",
                  "{{$.inputs.parameters['project']}}",
                  "--method.location",
                  "--method.display_name",
                  "{{$.inputs.parameters['display_name']}}",
                  "--method.gcs_source",
                  "{{$.inputs.parameters['gcs_source']}}",
                  "--method.labels",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['dataset'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "TimeSeriesDataset",
                  "--method_name",
                  "create"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         },
         "exec-time-series-dataset-export":{
            "container":{
               "args":[
                  "--init.dataset_name",
                  "{{$.inputs.artifacts['dataset'].metadata['resourceName']}}",
                  "--init.project",
                  "{{$.inputs.parameters['project']}}",
                  "--init.location",
                  "--method.output_dir",
                  "{{$.inputs.parameters['output_dir']}}",
                  "--executor_input",
                  "{{$}}",
                  "--resource_name_output_artifact_uri",
                  "{{$.outputs.artifacts['exported_dataset'].uri}}"
               ],
               "command":[
                  "python3",
                  "-m",
                  "google_cloud_pipeline_components.container.aiplatform.remote_runner",
                  "--cls_name",
                  "TimeSeriesDataset",
                  "--method_name",
                  "export_data"
               ],
               "image":"gcr.io/ml-pipeline/google-cloud-pipeline-components:latest"
            }
         }
      }
   },
   "pipelineInfo":{
      "name":"training-test"
   },
   "root":{
      "dag":{
         "tasks":{
            "automl-forecasting-training-job":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-automl-forecasting-training-job"
               },
               "dependentTasks":[
                  "time-series-dataset-create"
               ],
               "inputs":{
                  "artifacts":{
                     "dataset":{
                        "taskOutputArtifact":{
                           "outputArtifactKey":"dataset",
                           "producerTask":"time-series-dataset-create"
                        }
                     }
                  },
                  "parameters":{
                     "available_at_forecast_columns":{
                        "runtimeValue":{
                           "constant":[

                           ]
                        }
                     },
                     "data_granularity_count":{
                        "runtimeValue":{
                           "constant":1.0
                        }
                     },
                     "data_granularity_unit":{
                        "runtimeValue":{
                           "constant":"data_granularity_unit"
                        }
                     },
                     "display_name":{
                        "runtimeValue":{
                           "constant":"test_display_name"
                        }
                     },
                     "forecast_horizon":{
                        "runtimeValue":{
                           "constant":12.0
                        }
                     },
                     "model_display_name":{
                        "runtimeValue":{
                           "constant":"test_model_display_name"
                        }
                     },
                     "optimization_objective":{
                        "runtimeValue":{
                           "constant":"optimization_objective"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     },
                     "target_column":{
                        "runtimeValue":{
                           "constant":"target_column"
                        }
                     },
                     "test_fraction_split":{
                        "runtimeValue":{
                           "constant":0.2
                        }
                     },
                     "time_column":{
                        "runtimeValue":{
                           "constant":"time_column"
                        }
                     },
                     "time_series_identifier_column":{
                        "runtimeValue":{
                           "constant":"time_series_identifier_column"
                        }
                     },
                     "training_fraction_split":{
                        "runtimeValue":{
                           "constant":0.6
                        }
                     },
                     "unavailable_at_forecast_columns":{
                        "runtimeValue":{
                           "constant":[

                           ]
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"automl-forecasting-training-job"
               }
            },
            "time-series-dataset-create":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-time-series-dataset-create"
               },
               "inputs":{
                  "parameters":{
                     "display_name":{
                        "runtimeValue":{
                           "constant":"test_display_name"
                        }
                     },
                     "gcs_source":{
                        "runtimeValue":{
                           "constant":"gs://test_gcs_source"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"time-series-dataset-create"
               }
            },
            "time-series-dataset-export":{
               "cachingOptions":{
                  "enableCache":true
               },
               "componentRef":{
                  "name":"comp-time-series-dataset-export"
               },
               "dependentTasks":[
                  "time-series-dataset-create"
               ],
               "inputs":{
                  "artifacts":{
                     "dataset":{
                        "taskOutputArtifact":{
                           "outputArtifactKey":"dataset",
                           "producerTask":"time-series-dataset-create"
                        }
                     }
                  },
                  "parameters":{
                     "output_dir":{
                        "runtimeValue":{
                           "constant":"gs://test_gcs_output_dir"
                        }
                     },
                     "project":{
                        "runtimeValue":{
                           "constant":"test_project"
                        }
                     }
                  }
               },
               "taskInfo":{
                  "name":"time-series-dataset-export"
               }
            }
         }
      }
   },
   "schemaVersion":"2.1.0"
}
