name: Kubeflow - Launch Experiment
description: Kubeflow Experiment launcher
inputs:
- {name: Experiment name,           type: String,                       description: 'Experiment name.'}
- {name: Namespace,                 type: String,   default: kubeflow,  description: 'Namespace.'}
- {name: Version,                   type: String,   default: v1alpha3,  description: 'Experiment version.'}
- {name: Max trial count,           type: Integer,                      description: 'How many trials can be executed at most.'}
- {name: Max failed trial count,    type: Integer,                      description: 'How many trials can fail at most.'}
- {name: Parallel trial count,      type: Integer,  default: 3          description: 'How many trials can be running in parallel at most.'}
- {name: Objective Configuration,   type: JSON,                         description: 'Experiment objective.'}
- {name: Algorithm Configuration,   type: JSON,                         description: 'Experiment algorithm.'}
- {name: trialTemplate,             type: JSON,                         description: 'Experiment trialTemplate.'}
- {name: Parameter configs,         type: JSON,                         description: 'Experiment Parameter configuration.'}
- {name: Metrics collector,         type: JSON,                         description: 'Experiment metricsCollector.'}
- {name: Experiment timeout minutes, type: Integer,  default: 60*24,    description: 'Time in minutes to wait for the Experiment to complete.'}
- {name: Delete finished experiment, type: Bool,     default: 'True',   description: 'Whether to delete the experiment after it is finished.'}
outputs:
- {name: Best parameter set,        type: JSON,                         description: 'The parameter set of the best Experiment trial.'}
implementation:
  container:
    image: liuhougangxa/katib-experiment-launcher:latest
    command: [python, /ml/launch_experiment.py]
    args: [
      --name,                     {inputValue: Experiment name},
      --namespace,                {inputValue: Namespace},
      --version,                  {inputValue: Experiment version},
      --maxTrialCount,            {inputValue: Max trial count},
      --maxFailedTrialCount,      {inputValue: Max failed trial count},
      --parallelTrialCount,       {inputValue: Max trial can run in parallel},
      --objectiveConfig,          {inputValue: objective configuration},
      --algorithmConfig,          {inputValue: algorithm configuration},
      --trialTemplate,            {inputValue: trial job template},
      --parameters,               {inputValue: Hyperparameter which need be tuned},
      --metricsCollector,         {inputValue: Metrics collector configuration},
      --experimentTimeoutMinutes, {inputValue: Experiment timeout minutes},
      --deleteAfterDone,          {inputValue: Delete finished experiment},
      --outputFile,               {outputPath: Best parameter set},
    ]
