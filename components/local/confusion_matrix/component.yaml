name: Confusion matrix
description: Calculates confusion matrix
inputs:
  - {name: Predictions,     type: {GcsUri: [text, CSV]},    description: 'GCS path of prediction file pattern.'}
  - {name: Output dir,      type: {GcsUri: Directory},      description: 'GCS path of the output directory.'}
outputs:
  - {name: UI metadata,     type: UI metadata}
  - {name: Metrics,         type: Metrics}
implementation:
  container:
    image: gcr.io/ml-pipeline/ml-pipeline-local-confusion-matrix:85c6413a2e13da4b8f198aeac1abc2f3a74fe789
    command: [python, /ml/confusion_matrix.py] #python2.7
    args: [
      --predictions, {inputValue: Predictions},
      --output,      {inputValue: Output dir},
    ]
#Argo deletes the source files as soon as it uploads them to the artifact store. Trying to output the same files as parameter outputs fails since the source files are already deleted.
#    fileOutputs:
#      UI metadata:  /mlpipeline-ui-metadata.json
#      Metrics:      /mlpipeline-metrics.json
