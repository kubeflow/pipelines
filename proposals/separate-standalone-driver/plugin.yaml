# Sample of the config map for mounting the executor plugin
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    workflows.argoproj.io/configmap-type: ExecutorPlugin # Workflow Controller applies the plugin configuration based on this label
  name: driver-plugin
data:
  sidecar.automountServiceAccountToken: "true" # Enables automatic mounting of the service account token in the sidecar
  sidecar.container: |
    image: ...
    name: driver-plugin
    resources:
      ...
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      readOnlyRootFilesystem: true
      runAsNonRoot: true
      runAsUser: 1000 # Must run as a non-nobody user to access the token inside the /var/run/argo volume from the sidecar

