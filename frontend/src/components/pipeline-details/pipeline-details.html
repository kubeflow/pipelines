<dom-module id="pipeline-details">
  <template>
    <link rel="stylesheet" href="./pipeline-details.css">

    <div class="toolbar">
      <div class="toolbar-title">Pipeline Details</div>
      <paper-button class="toolbar-button" on-click="_runOnce">
        <span class="padded">Run Once</span>
        <iron-icon icon="maps:directions-run"></iron-icon>
      </paper-button>
    </div>

    <div class="padded-20">
      <div class="pipeline-name padded">
        [[pipeline.name]]
        <span class="padded faded">[[[pipeline.id]]]</span>
      </div>

      <div class="tabs-container">
        <paper-tabs class="no-shrink" selected="{{selectedTab}}">
          <paper-tab>Basic Config</paper-tab>
          <paper-tab>Past Runs</paper-tab>
        </paper-tabs>
      </div>

      <iron-pages selected="{{selectedTab}}">
        <div class="details">

          <br/>

          <div class="detail-info-row">
            <span class="detail-title">Pipeline Package ID</span><span>[[pipeline.packageId]]</span>
          </div>
          <div class="detail-info-row">
            <span class="detail-title">Description</span><span>[[pipeline.description]]</span>
          </div>
          <div class="detail-info-row">
            <span class="detail-title">Created</span><span>[[pipeline.createdAt]]</span>
          </div>
          <div class="detail-info-row">
            <span class="detail-title">Starts</span><span>[[_dateToString(pipeline.starts)]]</span>
          </div>
          <div class="detail-info-row">
            <span class="detail-title">Ends</span><span>[[_dateToString(pipeline.ends)]]</span>
          </div>
          <div class="detail-info-row">
            <span class="detail-title">Recurring</span><span>[[pipeline.recurring]]</span>
          </div>

          <template is="dom-if" if="[[pipeline.recurring]]">
            <div class="detail-info-row">
              <span class="detail-title">Runs every</span><span>[[pipeline.recurringIntervalHours]] hours</span>
            </div>
          </template>

          <br/>
          <br/>

          <template is="dom-if" if="[[pipeline.parameters.length]]">
            <div>
              <div class="input-param-header">Input Parameters</div>
              <template is="dom-repeat" items="[[pipeline.parameters]]" as="param">
                <div class="detail-info-row">
                  <span class="detail-title">[[param.name]]</span><span>[[param.value]]</span>
                </div>
              </template>
            </div>
          </template>
        </div>
        <job-list id="jobs"></job-list>
      </iron-pages>
    </div>

  </template>
</dom-module>
