<dom-module id="pipeline-details">
  <template>
    <link rel="stylesheet" href="./pipeline-details.css">

    <div class="toolbar">
      <div class="toolbar-title">Pipeline Details</div>
      <paper-button class="toolbar-button" on-click="_runOnce">
        <span class="padded">Run Once</span>
        <iron-icon icon="maps:directions-run"></iron-icon>
      </paper-button>
    </div>

    <div class="padded-20">
      <div class="pipeline-name padded">
        [[pipeline.name]]
        <span class="padded faded">[[[pipeline.id]]]</span>
      </div>

      <div class="tabs-container">
        <paper-tabs class="no-shrink" selected="{{selectedTab}}">
          <paper-tab>Basic Config</paper-tab>
          <paper-tab>Past Runs</paper-tab>
        </paper-tabs>
      </div>

      <iron-pages selected="{{selectedTab}}">
        <div class="details">

          <br/>

          <div class="inline-outer">
            <h4 class="strong inline-inner-left">Pipeline Package ID</h4><p class="inline-inner-right">[[pipeline.packageId]]</p>
          </div>
          <div class="inline-outer">
            <h4 class="strong inline-inner-left">Description</h4><p class="inline-inner-right">[[pipeline.description]]</p>
          </div>
          <div class="inline-outer">
            <h4 class="strong inline-inner-left">Created</h4><p class="inline-inner-right">[[pipeline.createdAt]]</p>
          </div>
          <div class="inline-outer">
            <h4 class="strong inline-inner-left">Starts</h4><p class="inline-inner-right">[[epochToDateString(pipeline.starts)]]</p>
          </div>
          <div class="inline-outer">
            <h4 class="strong inline-inner-left">Ends</h4><p class="inline-inner-right">[[epochToDateString(pipeline.ends)]]</p>
          </div>
          <div class="inline-outer">
            <h4 class="strong inline-inner-left">Recurring</h4><p class="inline-inner-right">[[pipeline.recurring]]</p>
          </div>

          <template is="dom-if" if="[[pipeline.recurring]]">
            <div class="inline-outer">
              <h4 class="strong inline-inner-left">Runs every</h4><p class="inline-inner-right">[[pipeline.recurringIntervalHours]] hours</p>
            </div>
          </template>

          <br/>
          <br/>

          <template is="dom-if" if="[[pipeline.parameters.length]]">
            <div>
              <h2>Input Parameters</h2>
              <template is="dom-repeat" items="[[pipeline.parameters]]" as="param">
                <div class="inline-outer">
                  <h4 class="strong inline-inner-left">[[param.name]]</h4><p class="inline-inner-right">[[param.value]]</p>
                </div>
              </template>
            </div>
          </template>
        </div>
        <job-list id="jobs"></job-list>
      </iron-pages>
    </div>

  </template>
</dom-module>
